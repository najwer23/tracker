import{r as c,j as t}from"./react-DOKUib4L.js";import{c as L}from"./react-dom-b-hWN9q_.js";import{u as S,c as b,R as w}from"./react-router-CxAikw5p.js";import{L as v}from"./leaflet-SGQCfi_b.js";import{M as R,T as A,a as E,P as O,C,b as F,u as I}from"./react-leaflet-CC3pfOIP.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./@react-leaflet-BcmaozC2.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const T=()=>{const{pathname:o}=S();return c.useEffect(()=>{window.scrollTo(0,0)},[o]),null},N=v.icon({iconUrl:"marker.svg",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowAnchor:[12,41]});function D(o,i,r,u){const e=l=>l*Math.PI/180,a=e(r-o),f=e(u-i),d=Math.sin(a/2)**2+Math.cos(e(o))*Math.cos(e(r))*Math.sin(f/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}const z=({position:o})=>{const i=I(),r=c.useRef(!1);return c.useEffect(()=>{r.current||(i.setView([o.latitude,o.longitude],17),r.current=!0)},[i,o]),null},H=()=>{const[o,i]=c.useState(null),[r,u]=c.useState(null),[e,s]=c.useState(0),[a,f]=c.useState([]),[d,h]=c.useState(null),l=c.useRef(null),x=30,j=5;return c.useEffect(()=>{if(!navigator.geolocation){h("Geolocation is not supported by your browser");return}const y=p=>{const n={latitude:p.coords.latitude,longitude:p.coords.longitude,accuracy:p.coords.accuracy};if(!(n.accuracy>x)){if(!r){u(n),i(n),l.current=n,f([[n.latitude,n.longitude]]),h(null);return}if(l.current){const m=D(l.current.latitude,l.current.longitude,n.latitude,n.longitude);m>n.accuracy&&m>j&&(s(g=>g+m),i(n),l.current=n,f(g=>[...g,[n.latitude,n.longitude]]),h(null))}}},P=p=>{h(`Error getting position: ${p.message}`)},M=navigator.geolocation.watchPosition(y,P,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3});return()=>navigator.geolocation.clearWatch(M)},[r]),t.jsxs("div",{style:{height:"100vh",width:"100%"},children:[t.jsx("h1",{children:"Traveled Distance and Path"}),d&&t.jsx("p",{style:{color:"red"},children:d}),!d&&!o&&t.jsx("p",{children:"Loading position..."}),o&&r&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Start Position:"}),t.jsx("br",{}),"Lat: ",r.latitude.toFixed(6),", Lon: ",r.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Current Position:"}),t.jsx("br",{}),"Lat: ",o.latitude.toFixed(6),", Lon: ",o.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Accuracy:"})," ±",o.accuracy.toFixed(1)," meters"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Total Distance Traveled:"})," ",(e/1e3).toFixed(3)," km"]})]}),t.jsxs(R,{center:[r.latitude,r.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"80vh",width:"100%"},children:[t.jsx(z,{position:r}),t.jsx(A,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.jsx(E,{position:[o.latitude,o.longitude],icon:N,children:t.jsxs(O,{children:["Current Location ",t.jsx("br",{}),"Accuracy: ±",o.accuracy.toFixed(1)," meters"]})}),t.jsx(C,{center:[o.latitude,o.longitude],radius:o.accuracy,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.1}}),t.jsx(F,{positions:a,pathOptions:{color:"red",weight:4}})]})]})]})},q=b([{path:"/",element:t.jsxs(t.Fragment,{children:[t.jsx(T,{}),t.jsx(H,{})]})}]),V=()=>t.jsx(w,{router:q}),_=()=>t.jsx(V,{});L.createRoot(document.getElementById("root")).render(t.jsx(_,{}));
