import{r as c,j as t}from"./react-DOKUib4L.js";import{c as j}from"./react-dom-b-hWN9q_.js";import{u as y,c as L,R as P}from"./react-router-CxAikw5p.js";import{L as M}from"./leaflet-SGQCfi_b.js";import{M as S,T as b,a as v,P as w,C as R,u as F}from"./react-leaflet-DL2rDX5d.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./@react-leaflet-BcmaozC2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const E=()=>{const{pathname:o}=y();return c.useEffect(()=>{window.scrollTo(0,0)},[o]),null},A=M.icon({iconUrl:"marker.svg",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowAnchor:[12,41]});function O(o,n,r,u){const e=p=>p*Math.PI/180,i=e(r-o),d=e(u-n),a=Math.sin(i/2)**2+Math.cos(e(o))*Math.cos(e(r))*Math.sin(d/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}const T=({position:o})=>{const n=F(),r=c.useRef(!1);return c.useEffect(()=>{r.current||(n.setView([o.latitude,o.longitude],17),r.current=!0)},[n,o]),null},C=()=>{const[o,n]=c.useState(null),[r,u]=c.useState(null),[e,s]=c.useState(0),[i,d]=c.useState(null),a=c.useRef(null);return c.useEffect(()=>{if(!navigator.geolocation){d("Geolocation is not supported by your browser");return}const f=h=>{const l={latitude:h.coords.latitude,longitude:h.coords.longitude,accuracy:h.coords.accuracy};if(!r){u(l),n(l),a.current=l,d(null);return}if(a.current){const m=O(a.current.latitude,a.current.longitude,l.latitude,l.longitude);m>3&&(s(x=>x+m),n(l),a.current=l,d(null))}},p=h=>{d(`Error getting position: ${h.message}`)},g=navigator.geolocation.watchPosition(f,p,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3});return()=>navigator.geolocation.clearWatch(g)},[r]),t.jsxs("div",{style:{height:"100vh",width:"100%"},children:[t.jsx("h1",{children:"Traveled Distance From Start"}),i&&t.jsx("p",{style:{color:"red"},children:i}),!i&&!o&&t.jsx("p",{children:"Loading position..."}),o&&r&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Start Position:"}),t.jsx("br",{}),"Lat: ",r.latitude.toFixed(6),", Lon: ",r.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Current Position:"}),t.jsx("br",{}),"Lat: ",o.latitude.toFixed(6),", Lon: ",o.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Accuracy:"})," ±",o.accuracy.toFixed(1)," meters"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Total Distance Traveled:"})," ",(e/1e3).toFixed(3)," km"]})]}),t.jsxs(S,{center:[r.latitude,r.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"80vh",width:"100%"},children:[t.jsx(T,{position:r}),t.jsx(b,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.jsx(v,{position:[o.latitude,o.longitude],icon:A,children:t.jsxs(w,{children:["Current Location ",t.jsx("br",{}),"Accuracy: ±",o.accuracy.toFixed(1)," meters"]})}),t.jsx(R,{center:[o.latitude,o.longitude],radius:o.accuracy,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.1}})]})]})]})},I=L([{path:"/",element:t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsx(C,{})]})}]),z=()=>t.jsx(P,{router:I}),D=()=>t.jsx(z,{});j.createRoot(document.getElementById("root")).render(t.jsx(D,{}));
