import{r as a,j as t}from"./react-DOKUib4L.js";import{c as M}from"./react-dom-b-hWN9q_.js";import{u as L,c as P,R as w}from"./react-router-CxAikw5p.js";import{L as S}from"./leaflet-SGQCfi_b.js";import{M as b,T as v,a as A,P as R,C as E,u as F}from"./react-leaflet-DL2rDX5d.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./@react-leaflet-BcmaozC2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const C=()=>{const{pathname:o}=L();return a.useEffect(()=>{window.scrollTo(0,0)},[o]),null},O=S.icon({iconUrl:"marker.svg",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowAnchor:[12,41]});function I(o,n,r,u){const e=p=>p*Math.PI/180,i=e(r-o),d=e(u-n),l=Math.sin(i/2)**2+Math.cos(e(o))*Math.cos(e(r))*Math.sin(d/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}const T=({position:o})=>{const n=F(),r=a.useRef(!1);return a.useEffect(()=>{r.current||(n.setView([o.latitude,o.longitude],17),r.current=!0)},[n,o]),null},N=()=>{const[o,n]=a.useState(null),[r,u]=a.useState(null),[e,s]=a.useState(0),[i,d]=a.useState(null),l=a.useRef(null),m=30,p=5;return a.useEffect(()=>{if(!navigator.geolocation){d("Geolocation is not supported by your browser");return}const g=h=>{const c={latitude:h.coords.latitude,longitude:h.coords.longitude,accuracy:h.coords.accuracy};if(!(c.accuracy>m)){if(!r){u(c),n(c),l.current=c,d(null);return}if(l.current){const f=I(l.current.latitude,l.current.longitude,c.latitude,c.longitude);f>c.accuracy&&f>p&&(s(y=>y+f),n(c),l.current=c,d(null))}}},x=h=>{d(`Error getting position: ${h.message}`)},j=navigator.geolocation.watchPosition(g,x,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3});return()=>navigator.geolocation.clearWatch(j)},[r]),t.jsxs("div",{style:{height:"100vh",width:"100%"},children:[t.jsx("h1",{children:"Traveled Distance with Accuracy Filtering"}),i&&t.jsx("p",{style:{color:"red"},children:i}),!i&&!o&&t.jsx("p",{children:"Loading position..."}),o&&r&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Start Position:"}),t.jsx("br",{}),"Lat: ",r.latitude.toFixed(6),", Lon: ",r.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Current Position:"}),t.jsx("br",{}),"Lat: ",o.latitude.toFixed(6),", Lon: ",o.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Accuracy:"})," ±",o.accuracy.toFixed(1)," meters"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Total Distance Traveled:"})," ",(e/1e3).toFixed(3)," km"]})]}),t.jsxs(b,{center:[r.latitude,r.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"80vh",width:"100%"},children:[t.jsx(T,{position:r}),t.jsx(v,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.jsx(A,{position:[o.latitude,o.longitude],icon:O,children:t.jsxs(R,{children:["Current Location ",t.jsx("br",{}),"Accuracy: ±",o.accuracy.toFixed(1)," meters"]})}),t.jsx(E,{center:[o.latitude,o.longitude],radius:o.accuracy,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.1}})]})]})]})},D=P([{path:"/",element:t.jsxs(t.Fragment,{children:[t.jsx(C,{}),t.jsx(N,{})]})}]),z=()=>t.jsx(w,{router:D}),H=()=>t.jsx(z,{});M.createRoot(document.getElementById("root")).render(t.jsx(H,{}));
