import{r as u,j as e}from"./react-DOKUib4L.js";import{c as p}from"./react-dom-b-hWN9q_.js";import{u as m,c as f,R as g}from"./react-router-CxAikw5p.js";import{L as x}from"./leaflet-SGQCfi_b.js";import{M as y,T as j,a as M,P as w,C as L,u as b}from"./react-leaflet-DL2rDX5d.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./@react-leaflet-BcmaozC2.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const P=()=>{const{pathname:o}=m();return u.useEffect(()=>{window.scrollTo(0,0)},[o]),null},v=x.icon({iconUrl:"marker.svg",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowAnchor:[12,41]});function A(o,c,s,i){const t=h=>h*Math.PI/180,a=t(s-o),d=t(i-c),n=Math.sin(a/2)**2+Math.cos(t(o))*Math.cos(t(s))*Math.sin(d/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))}const E=({position:o})=>{const c=b(),s=u.useRef(!1);return u.useEffect(()=>{s.current||(c.setView([o.latitude,o.longitude],17),s.current=!0)},[c,o]),null},R=()=>{const[o,c]=u.useState(null),[s,i]=u.useState(null);return u.useEffect(()=>{if(!navigator.geolocation){i("Geolocation is not supported by your browser");return}let t=null;const r=n=>{const l={latitude:n.coords.latitude,longitude:n.coords.longitude,accuracy:n.coords.accuracy};(!t||A(t.latitude,t.longitude,l.latitude,l.longitude)>3||l.accuracy<t.accuracy)&&(c(l),t=l,i(null))},a=n=>{i(`Error getting position: ${n.message}`)},d=navigator.geolocation.watchPosition(r,a,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3});return()=>navigator.geolocation.clearWatch(d)},[]),e.jsxs("div",{style:{height:"100vh",width:"100%"},children:[e.jsx("h1",{children:"High Accuracy Geolocation with Leaflet"}),s&&e.jsx("p",{style:{color:"red"},children:s}),!s&&!o&&e.jsx("p",{children:"Loading position..."}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("strong",{children:"Latitude:"})," ",o.latitude.toFixed(6)," ",e.jsx("br",{}),e.jsx("strong",{children:"Longitude:"})," ",o.longitude.toFixed(6)," ",e.jsx("br",{}),e.jsx("strong",{children:"Accuracy:"})," ±",o.accuracy.toFixed(1)," meters"]}),e.jsxs(y,{center:[o.latitude,o.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"800px",width:"100%"},children:[e.jsx(E,{position:o}),e.jsx(j,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(M,{position:[o.latitude,o.longitude],icon:v,children:e.jsxs(w,{children:["Your current location ",e.jsx("br",{}),"Accuracy: ±",o.accuracy.toFixed(1)," meters"]})}),e.jsx(L,{center:[o.latitude,o.longitude],radius:o.accuracy,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.1}})]})]})]})},O=f([{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(R,{})]})}]),S=()=>e.jsx(g,{router:O}),F=()=>e.jsx(S,{});p.createRoot(document.getElementById("root")).render(e.jsx(F,{}));
