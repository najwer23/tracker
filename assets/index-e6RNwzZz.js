import{r as i,j as t}from"./react-DOKUib4L.js";import{c as P}from"./react-dom-b-hWN9q_.js";import{u as R,c as w,R as L}from"./react-router-CxAikw5p.js";import{L as T}from"./leaflet-SGQCfi_b.js";import{M as S,T as v,a as E,P as C,C as A,b as O,u as F}from"./react-leaflet-CC3pfOIP.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./@react-leaflet-BcmaozC2.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();const I=()=>{const{pathname:r}=R();return i.useEffect(()=>{window.scrollTo(0,0)},[r]),null},D=30,N=5,H=2e3,k=T.icon({iconUrl:"marker.svg",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowAnchor:[12,41]});function z(r,c,o,l){const e=a=>a*Math.PI/180,u=e(o-r),f=e(l-c),h=Math.sin(u/2)**2+Math.cos(e(r))*Math.cos(e(o))*Math.sin(f/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}const _=({position:r})=>{const c=F(),o=i.useRef(!1);return i.useEffect(()=>{o.current||(c.setView([r.latitude,r.longitude],17),o.current=!0)},[c,r]),null},q=()=>{const[r,c]=i.useState(null),[o,l]=i.useState(null),[e,n]=i.useState(0),[u,f]=i.useState([]),[h,p]=i.useState(null),a=i.useRef(null),g=i.useRef(0),j=i.useCallback(d=>{const m=Date.now();if(m-g.current<H)return;const s={latitude:d.coords.latitude,longitude:d.coords.longitude,accuracy:d.coords.accuracy};if(!(s.accuracy>D)){if(!o){l(s),c(s),a.current=s,f([[s.latitude,s.longitude]]),p(null),g.current=m;return}if(a.current){const M=z(a.current.latitude,a.current.longitude,s.latitude,s.longitude);M>N&&s.accuracy<=a.current.accuracy+10&&(n(x=>x+M),c(s),a.current=s,f(x=>[...x,[s.latitude,s.longitude]]),p(null),g.current=m)}}},[o]),y=i.useCallback(d=>{p(`Error getting position: ${d.message}`)},[]);i.useEffect(()=>{if(!navigator.geolocation){p("Geolocation is not supported by your browser.");return}const d=navigator.geolocation.watchPosition(j,y,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3});return()=>navigator.geolocation.clearWatch(d)},[j,y]);const b=()=>{c(null),l(null),n(0),f([]),p(null),a.current=null,g.current=0};return t.jsxs("div",{style:{height:"100vh",width:"100%",padding:10},children:[t.jsx("h1",{children:"Traveled Distance and Path"}),h&&t.jsx("p",{style:{color:"red"},children:h}),!h&&!r&&t.jsx("p",{children:"Loading current position..."}),r&&o&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Start Position:"}),t.jsx("br",{}),"Lat: ",o.latitude.toFixed(6),", Lon:"," ",o.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Current Position:"}),t.jsx("br",{}),"Lat: ",r.latitude.toFixed(6),", Lon:"," ",r.longitude.toFixed(6)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Accuracy:"})," ±",r.accuracy.toFixed(1)," meters"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Total Distance Traveled:"})," ",(e/1e3).toFixed(3)," km"]}),t.jsx("button",{onClick:b,"aria-label":"Reset tracking",children:"Reset Tracking"})]}),t.jsxs(S,{center:[o.latitude,o.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"80vh",width:"100%"},"aria-label":"Map showing traveled path",children:[t.jsx(_,{position:o}),t.jsx(v,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.jsx(E,{position:[r.latitude,r.longitude],icon:k,children:t.jsxs(C,{children:["Current Location",t.jsx("br",{}),"Accuracy: ±",r.accuracy.toFixed(1)," meters"]})}),t.jsx(A,{center:[r.latitude,r.longitude],radius:r.accuracy,pathOptions:{color:"blue",fillColor:"blue",fillOpacity:.1}}),t.jsx(O,{positions:u,pathOptions:{color:"red",weight:4}})]})]})]})},U=w([{path:"/",element:t.jsxs(t.Fragment,{children:[t.jsx(I,{}),t.jsx(q,{})]})}]),V=()=>t.jsx(L,{router:U}),B=()=>t.jsx(V,{});P.createRoot(document.getElementById("root")).render(t.jsx(B,{}));
